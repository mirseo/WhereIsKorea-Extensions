const KOREA_KEYWORDS=["대한민국","한국","남한","코리아","South Korea","Korea","Republic of Korea","ROK","KR","KOR","KOREA","Korea, Republic of","Korea (South)","Korea, South","S. Korea","So. Korea","South Korean",,"K-Country","K.R","Rep. of Korea","South of Korea","Korea (S)","The Land of the Morning Calm","410","+82","韓国","韩国","Cor\xe9e du Sud","S\xfcdkorea","Corea del Sur","Coreia do Sul","Zuid-Korea","Южная Корея","كوريا الجنوبية","Republik Korea","S\xfcdkorea","R\xe9publique de Cor\xe9e","Cor\xe9e du Sud","Rep\xfablica de Corea","Corea del Sur","Repubblica di Corea","Coreia do Sul","Zuid-Korea","Южная Корея","seoul","daehanminguk","corea","Coreia","KR-","大韓民國","大韩民国","大韓民国","Đại H\xe0n D\xe2n Quốc","Южная Корея","KR-KR"],KOREA_PATTERNS=[/\b(South\s*Korea|Korea\s*Republic|Republic\s*of\s*Korea)\b/i,/\b(대한민국|한국)\b/,/\bKR\b/,/\bKOR\b/,/\+82\b/];let autoSelectEnabled=!1,processedSelects=new Set;function initAutoSelector(){if(!autoSelectEnabled)return;processExistingSelects();let e=new MutationObserver(function(e){autoSelectEnabled&&e.forEach(function(e){e.addedNodes.forEach(function(e){if(e.nodeType===Node.ELEMENT_NODE){let t=e.querySelectorAll?e.querySelectorAll("select"):[];t.forEach(processSelect),"SELECT"===e.tagName&&processSelect(e)}})})});e.observe(document.body,{childList:!0,subtree:!0})}function processExistingSelects(){let e=document.querySelectorAll("select");e.forEach(processSelect)}function processSelect(e){if(processedSelects.has(e)||(processedSelects.add(e),!isCountrySelect(e)))return;let t=findKoreaOption(e);if(t){if(e.value===t.value||t.selected)return;selectKoreaOption(e,t)}}function isCountrySelect(e){let t=[e.name,e.id,e.className,e.getAttribute("placeholder")].join(" ").toLowerCase();return["country","nation","nationality","location","region","국가","나라","지역"].some(e=>t.includes(e))}function findKoreaOption(e){let t=Array.from(e.options);for(let o of t){let r=o.textContent.trim(),a=o.value.toLowerCase();if(isKoreaMatch(r)||isKoreaMatch(a))return o}return null}function isKoreaMatch(e){let t=e.toLowerCase().trim();for(let o of KOREA_KEYWORDS){let r=o.toLowerCase();if(t===r||t.includes(r))return!0}for(let a of KOREA_PATTERNS)if(a.test(e))return!0;return!1}function selectKoreaOption(e,t){try{e.value,t.selected=!0,e.value=t.value;let o=new Event("change",{bubbles:!0});e.dispatchEvent(o);let r=new Event("input",{bubbles:!0});e.dispatchEvent(r),updateStats(),console.log("Korea automatically selected:",t.textContent)}catch(a){console.error("Error selecting Korea option:",a)}}function updateStats(){chrome.storage.local.get(["koreaSelectorStats"],function(e){let t=e.koreaSelectorStats||{totalSelections:0};t.totalSelections++,t.lastSelection={url:window.location.href,timestamp:Date.now()},chrome.storage.local.set({koreaSelectorStats:t})})}chrome.storage.local.get(["koreaSelectorEnabled"],function(e){(autoSelectEnabled=e.koreaSelectorEnabled||!1)&&initAutoSelector()}),chrome.runtime.onMessage.addListener(function(e,t,o){return"toggleAutoSelect"===e.action&&((autoSelectEnabled=e.enabled)?(initAutoSelector(),o({success:!0,message:"자동 선택이 활성화되었습니다"})):o({success:!0,message:"자동 선택이 비활성화되었습니다"})),!0});